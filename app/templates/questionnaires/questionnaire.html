{% extends "base.html" %}

{% block app_content %}
<div id="questionnaire">
    <div id="general-info">
        <ul class="list-unstyled">
            <li id="name">
                <strong>{{ _('Name') }}:</strong> {{ data['questionnaire'].name }}
            </li>
            <li id="type">
                <strong>{{ _('Type') }}:</strong> {{ data['questionnaire'].questionnaire_type }}
            </li>
            <li id="description">
                <strong>{{ _('Description') }}:</strong> {{ data['questionnaire'].description }}
            </li>
            <li id="scales">
                <strong>{{ _('Scales') }}:</strong> {{ data['questionnaire'].questionnaire_scale.count() }}
            </li>
        </ul>
    </div>
    <div id="scales" class="container">
        {% for scale in data['scales'] %}
        <div class="row">
            <hr>
            <h3>{{ _('Scale') }} {{ scale['scale'].scale }}: {{ scale['scale'].name }}</h3>
            <ul class="list-unstyled">
                <li id="scale-score">
                    <strong>{{ _('Scale score') }}:</strong> {{ scale['score'] }}
                </li>
                <li id="scale-description">
                    <strong>{{ _('Description') }}:</strong> {{ scale['scale'].description }}
                </li>
                <li id="scale-date">
                    <strong>{{ _('Date') }}:</strong> {{ scale['questions'][0]['result'].date.strftime('%Y-%m-%d %H:%M:%S') }}
                </li>
            </ul>
            <table id=questions-table" class="table table-striped">
                <tr id="header-row">
                    <th>ID</th>
                    <th>{{ _('Question') }}</th>
                    <th>{{ _('Result') }}</th>
                    <th>{{ _('Reversed') }}</th>
                </tr>
                {% for question in scale['questions'] %}
                <tr id="data-row">
                    <td>{{ question['question'].question_number }}</td>
                    <td>{{ question['question'].question }}</td>
                    <td>{{ question['result'].result }}</td>
                    <td>{{ question['question'].reversed }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}